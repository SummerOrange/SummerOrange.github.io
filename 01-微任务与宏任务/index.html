<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="Hexo Theme Keep"><meta name="description" content="Hexo Theme Keep"><meta name="author" content="ChengShuomin"><title>微任务与宏任务 | 学习笔记</title><link rel="stylesheet" href="/css/style.css"><link rel="shortcut icon" href="/images/favicon.webp"><link rel="stylesheet" href="/font/css/fontawesome.min.css"><link rel="stylesheet" href="/font/css/brands.min.css"><script class="keep-theme-configurations">const KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"zh-cn"}
    KEEP.theme_config = {"base_info":{"primary_color":"#d5c4f2","title":"学习笔记","author":"ChengShuomin","avatar":"/images/avatar.webp","logo":"/images/logo.webp","favicon":"/images/favicon.webp"},"language":"zh-CN","menu":{"home":"/","archives":"/archives"},"first_screen":{"enable":true,"background_img":"/images/bg.svg","background_img_dark":"/images/bg.svg","description":"♚ 今天不走，明天要跑 ♚ || 走过的路，每一步都算数","hitokoto":false},"social_contact":{"enable":false,"links":{"github":null,"weixin":null,"qq":null,"weibo":null,"zhihu":null,"twitter":null,"x":null,"facebook":null,"email":null}},"scroll":{"progress_bar":true,"percent":true,"hide_header":true},"home":{"announcement":null,"category":false,"tag":false},"post":{"author_badge":{"enable":true,"level_badge":true,"custom_badge":["One","Two","Three"]},"word_count":{"wordcount":false,"min2read":false},"datetime_format":"YYYY-MM-DD","copyright_info":true,"share":true,"reward":{"enable":false,"img_link":null,"text":null,"icon":null}},"code_block":{"tools":{"enable":false,"style":"default"},"highlight_theme":"default"},"toc":{"enable":true,"number":false,"expand_all":false,"init_open":true,"layout":"right"},"website_count":{"busuanzi_count":{"enable":false,"site_uv":false,"site_pv":false,"page_pv":false}},"local_search":{"enable":false,"preload":false},"comment":{"enable":false,"use":"valine","valine":{"appid":null,"appkey":null,"server_urls":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.39"},"waline":{"server_url":null,"reaction":false,"version":"3.3.2"},"giscus":{"repo":null,"repo_id":null,"category":"Announcements","category_id":null,"reactions_enabled":false},"artalk":{"server":null},"disqus":{"shortname":null}},"rss":{"enable":false},"lazyload":{"enable":false},"cdn":{"enable":false,"provider":"cdnjs"},"pjax":{"enable":false},"footer":{"since":2021,"word_count":false,"site_deploy":{"enable":false,"provider":"github","url":null},"record":{"enable":false,"list":[{"code":null,"link":null}]}},"inject":{"enable":false,"css":[null],"js":[null]},"root":"","source_data":{},"version":"4.2.5"}
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"}
    KEEP.language_code_block = {"copy":"复制代码","copied":"已复制","fold":"折叠代码块","folded":"已折叠"}
    KEEP.language_copy_copyright = {"copy":"复制版权信息","copied":"已复制","title":"原文标题","author":"原文作者","link":"原文链接"}
    KEEP.language_copyright = {"title":"标题","author":"作者","link":"链接","create_time":"创建时间","published":"发布于","license":"许可","license_title":"版权声明","license_content":"本博客所有文章除特别声明外，均采用 %s 许可协议。转载请注明出处！"}</script><meta name="generator" content="Hexo 6.1.0"></head><body><div class="progress-bar-container"><span class="scroll-progress-bar"></span></div><main class="page-container border-box"><div class="page-main-content border-box"><div class="page-main-content-top"><header class="header-wrapper"><div class="border-box header-content"><div class="left flex-start border-box"><a class="logo-image border-box" href="/"><img src="/images/logo.webp" alt="chengshuomin Web Blog" width="3rem" height="3rem" style="width:3rem;height:3rem;object-fit:cover"> </a><a class="site-name border-box" href="/">学习笔记</a></div><div class="right border-box"><div class="pc border-box"><ul class="menu-list border-box"><li class="menu-item flex-start border-box"><a class="menu-text-color border-box" href="/">首页</a></li><li class="menu-item flex-start border-box"><a class="menu-text-color border-box" href="/archives">归档</a></li></ul></div><div class="mobile border-box flex-start"><div class="icon-item menu-bar"><div class="menu-bar-middle"></div></div></div></div></div><div class="header-drawer"><ul class="drawer-menu-list border-box"><li class="drawer-menu-item border-box not-sub-menu"><label class="drawer-menu-label border-box"><a class="drawer-menu-text-color left-side flex-start border-box" href="/">首页</a></label></li><li class="drawer-menu-item border-box not-sub-menu"><label class="drawer-menu-label border-box"><a class="drawer-menu-text-color left-side flex-start border-box" href="/archives">归档</a></label></li></ul></div><div class="window-mask"></div></header></div><div class="page-main-content-middle border-box"><div class="main-content border-box"><div class="fade-in-down-animation"><div class="post-page-container border-box"><div class="post-content-container border-box"><div class="post-content-bottom border-box"><div class="post-title">微任务与宏任务</div><div class="post-header border-box"><div class="avatar-box border-box"><img src="/images/avatar.webp"></div><div class="info-box"><div class="author border-box"><span class="name">ChengShuomin</span> <span class="author-badge">Lv3</span></div><div class="meta-info border-box"><div class="post-meta-info-container border-box post"><div class="post-meta-info border-box"><span class="meta-info-item post-create-date"><i class="icon fa-solid fa-calendar-plus"></i>&nbsp; <span class="datetime">2021-08-27</span> </span><span class="post-tag meta-info-item border-box"><ul class="post-tag-ul"><li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/JavaScript/">JavaScript</a></li></ul></span></div></div></div></div></div><div class="post-content keep-markdown-body"><p>JavaScript是一门<strong>单线程、异步、非阻塞、解析类型脚本语言</strong>。</p><h2 id="1-进程-amp-线程"><a href="#1-进程-amp-线程" class="headerlink" title="1. 进程 &amp; 线程"></a>1. 进程 &amp; 线程</h2><h3 id="1-1-进程："><a href="#1-1-进程：" class="headerlink" title="1.1 进程："></a>1.1 进程：</h3><ul><li>程序运行的实例</li><li>同一程序可以产生多个进程</li><li>一个进程包含一个或多个线程</li></ul><h3 id="1-2-线程："><a href="#1-2-线程：" class="headerlink" title="1.2 线程："></a>1.2 线程：</h3><ul><li>操作系统能够进行运算调度的最小单位</li><li>一次只能执行一个任务</li><li>有自己的调用栈、寄存器环境</li><li>同一进程的线程共享进程资源</li></ul><h3 id="1-3-JS单线程："><a href="#1-3-JS单线程：" class="headerlink" title="1.3 JS单线程："></a>1.3 JS单线程：</h3><p>JavaScript 单线程指的是浏览器中负责解释和执行 JavaScript 代码的只有一个线程，即为<strong>JS引擎线程</strong></p><h3 id="1-4-浏览器渲染进程："><a href="#1-4-浏览器渲染进程：" class="headerlink" title="1.4 浏览器渲染进程："></a>1.4 浏览器渲染进程：</h3><p>浏览器的<strong>渲染进程</strong>是<strong>多线程</strong>的，如下：</p><ul><li><strong>JS引擎线程</strong></li><li><strong>事件触发线程</strong></li><li><strong>定时触发器线程</strong>（定时器触发线程只是为 setTimeout(…, n) 定时，n秒后，把它对应的回调函数(callback)交给 <strong>任务队列</strong> 维护，JS引擎线程会在适当的时候去任务队列取出任务并执行。）</li><li><strong>异步http请求线程</strong></li><li><strong>GUI渲染线程</strong></li></ul><p><img src="/01-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1/1650942425429-e24c82db-1b8e-4420-bebe-bb6f759831e7.png" alt="img"></p><h2 id="2-JavaScript的运行机制"><a href="#2-JavaScript的运行机制" class="headerlink" title="2. JavaScript的运行机制"></a>2. JavaScript的运行机制</h2><h3 id="2-1-事件循环-Event-Loop"><a href="#2-1-事件循环-Event-Loop" class="headerlink" title="2.1 事件循环 Event Loop"></a>2.1 事件循环 <em>Event Loop</em></h3><p><strong>事件触发线程</strong> 控制通过 <strong>事件循环 Event Loop</strong> 的机制，维护<strong>任务队列。</strong></p><p>JS引擎线程遇到异步(DOM事件监听、网络请求、setTimeout计时器等…)，会交给相应的线程单独去维护异步任务，等待某个时机(计时器结束、网络请求成功、用户点击DOM)，然后由 <strong>事件触发线程</strong> 将异步对应的 <strong>回调函数</strong> 加入到消息队列中，消息队列中的回调函数等待被执行。</p><p><strong>“任务队列”</strong> 是一个先进先出的数据结构，排在前面的事件，优先被主线程读取。</p><p>具体来说，<strong>异步执行的运行机制</strong> 如下：</p><p>（同步执行也是如此，因为它可以被视为没有异步任务的异步执行。）</p><p>（1）所有同步任务都在主线程上执行，形成一个<a class="link" target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2013/11/stack.html">执行栈<i class="fas fa-external-link-alt"></i></a>（execution context stack）。</p><p>（2）主线程之外，还存在一个”任务队列”（task queue）。只要异步任务有了运行结果，就在”任务队列”之中放置一个事件。</p><p>（3）一旦”执行栈”中的所有同步任务执行完毕，系统就会读取”任务队列”，看看里面有哪些事件。那些对应的异步任务，于是结束等待状态，进入执行栈，开始执行。</p><p>（4）主线程不断重复上面的第三步。</p><h3><a href="#" class="headerlink"></a><img src="/01-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1/1664127178058-15b84125-8ae8-45e5-b457-301e7317549f.png" alt="img"></h3><h3 id="-1"><a href="#-1" class="headerlink"></a></h3><h3 id="2-2-同步任务-synchronous-与异步任务-asynchronous"><a href="#2-2-同步任务-synchronous-与异步任务-asynchronous" class="headerlink" title="2.2 同步任务(synchronous)与异步任务(asynchronous)"></a>2.2 同步任务(synchronous)与异步任务(asynchronous)</h3><p><img src="/01-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1/1664127433261-b2c2fd79-c33f-49cc-96e0-2a20739068bb.png" alt="img"></p><p><strong>同步任务</strong>指的是，在主线程上排队执行的任务，只有前一个任务执行完毕，才能执行后一个任务；</p><p><strong>异步任务</strong>指的是，不进入主线程、而进入”任务队列”（task queue）的任务，只有”任务队列”通知主线程，某个异步任务可以执行了，该任务才会进入主线程执行。</p><h4 id="异步任务举例："><a href="#异步任务举例：" class="headerlink" title="异步任务举例："></a>异步任务举例：</h4><ul><li>网络请求</li><li>计时器</li><li>DOM事件监听</li></ul><h2 id="3-微任务与宏任务"><a href="#3-微任务与宏任务" class="headerlink" title="3. 微任务与宏任务"></a>3. 微任务与宏任务</h2><p>宏任务有Event Table、Event Queue，微任务有Event Queue。</p><p>任务队列中，宏任务和微任务队列的<strong>区别</strong>：</p><ul><li>当执行来自任务队列中的任务时，在每一次新的事件循环开始迭代的时候运行时都会执行队列中的每个任务。在每次迭代开始之后加入到队列中的任务需要<strong>在下一次迭代开始之后才会被执行</strong>。</li><li>每次当一个任务退出且执行上下文为空的时候，微任务队列中的每一个微任务会依次被执行。不同的是它会等到微任务队列为空才会停止执行——即使中途有微任务加入。换句话说，微任务可以添加新的微任务到队列中，并在下一个任务开始执行之前且当前事件循环结束之前执行完所有的微任务。</li></ul><h3 id="微任务（microtask）"><a href="#微任务（microtask）" class="headerlink" title="微任务（microtask）"></a>微任务（microtask）</h3><ul><li><code>Promise.then</code>、<code>Promise.catch</code> 和 <code>Promise.finally</code></li><li><code>process.nextTick</code> (Node.js 环境)</li><li>Object.observe() 异步地监视一个对象的修改（已废弃）</li><li>MutationObserver</li></ul><h3 id="宏任务（macrotask）"><a href="#宏任务（macrotask）" class="headerlink" title="宏任务（macrotask）"></a>宏任务（macrotask）</h3><ul><li><code>&lt;script&gt;</code></li><li><code>setTimeout</code></li><li><code>setInterval</code></li><li><code>setImmediate</code>(Node.js 环境 和 IE10 支持) （把一些需要长时间运行的操作放在一个回调函数里）</li><li><code>UI rendering</code></li><li>异步网络请求（XHR）</li><li>文件操作(I&#x2F;O)</li></ul><h3 id="执行顺序规则点："><a href="#执行顺序规则点：" class="headerlink" title="执行顺序规则点："></a>执行顺序规则点：</h3><ul><li><code>new Promise</code> 是同步任务， <strong><code>new Promise</code>参数中的代码会立即执行</strong></li><li><strong><code>new Promise.then</code> 是微任务，<code>then</code> 的回调函数分发到微任务队列</strong>(<code>then</code>链式写法，即then方法后面再调用另一个then方法，第一个回调函数完成以后，会将返回结果作为参数，传入第二个回调函数)</li><li><code>process.nextTick</code>分发到微任务队列</li><li><code>setTimeout</code>，其回调函数被分发到宏任务<code>Event Queue</code>（执行规则：从上到下排序，先进先执行）中（回调会在微任务执行后再执行）</li><li><code>async</code>函数还是基于<code>Promise</code>的一些封装，**<code>1</code>async<code>同</code>new Promise&#96;，是同步任务**</li><li><strong><code>await</code> 同<code>Promise.then</code> 是微任务</strong>，多个<code>await</code>时，等执行第一个<code>awiait</code>后，再将其后面的任务执行添加到队列。 <strong><code>await</code> 后应是<code>Promise</code>实例，如果不是直接执行返回。<code>await</code> 后面的函数直接按规则执行，如果是promise 就等执行结果得到后，继续执行下面的，这个过程相当于then。</strong></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>) <span class="comment">// 这儿是最先执行的</span></span><br><span class="line">  <span class="title function_">resolve</span>()</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br><span class="line"><span class="comment">// 1, 2, 3, 4</span></span><br></pre></td></tr></table></figure><h3 id="完整事件循环过程："><a href="#完整事件循环过程：" class="headerlink" title="完整事件循环过程："></a>完整事件循环过程：</h3><p><img src="/01-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1/1664127165470-bab034d7-83c7-4ca9-94ce-370ffa638565.png" alt="img"></p><h2 id="4-如何分析执行顺序"><a href="#4-如何分析执行顺序" class="headerlink" title="4. 如何分析执行顺序"></a>4. 如何分析执行顺序</h2><h3 id="题目1："><a href="#题目1：" class="headerlink" title="题目1："></a>题目1：</h3><p><strong>分析过程：</strong></p><ul><li><strong>先执行同步任务，遇到宏任务放宏任务队列，遇到微任务放到微任务队列。</strong></li><li><strong>主线程执行完一圈后，先执行微任务队列，再执行宏任务。</strong></li></ul><p>（动态修改两个队列：执行到时，增加微任务和宏任务队列；执行后，删掉队列的值）</p><ol><li>区分同步任务、微任务、宏任务</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 同步任务</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"><span class="comment">// 宏任务 A</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 同步任务</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">  <span class="comment">// 宏任务 B</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">10</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 同步任务</span></span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3&#x27;</span>);</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">    <span class="comment">// 微任务 A</span></span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;4&#x27;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 同步任务</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;5&#x27;</span>);</span><br><span class="line">  <span class="comment">// 宏任务 D</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">11</span>)</span><br><span class="line">  &#125;, <span class="number">1000</span>) <span class="comment">// 若此处没有1000毫秒的延迟，则先执行宏任务D，再执行宏任务E</span></span><br><span class="line">  <span class="title function_">resolve</span>(</span><br><span class="line">    <span class="comment">// 宏任务 E</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">12</span>)</span><br><span class="line">    &#125;))</span><br><span class="line">  <span class="comment">// 微任务 B</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;6&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 宏任务 C</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// 同步任务</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;7&#x27;</span>);</span><br><span class="line">  <span class="comment">// 同步任务</span></span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;8&#x27;</span>);</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">    <span class="comment">// 微任务 C</span></span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;9&#x27;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="2"><li>分别记录宏任务和微任务队列，动态入、出队列</li></ol><ul><li>执行同步任务：</li></ul><table><thead><tr><th>宏任务：</th><th>mac A, mic D(1000ms delay), mic E, mic C,</th></tr></thead><tbody><tr><td>微任务：</td><td>mic B,</td></tr><tr><td>结果：</td><td>1, 5,</td></tr></tbody></table><ul><li>执行微任务B</li></ul><table><thead><tr><th>宏任务：</th><th>mac A, mic D(1000ms delay), mic E, mic C,</th></tr></thead><tbody><tr><td>微任务：</td><td></td></tr><tr><td>结果：</td><td>1, 5, 6</td></tr></tbody></table><ul><li>执行宏任务A</li></ul><table><thead><tr><th>宏任务：</th><th>mic D(1000ms delay), mic E, mic C, mic B,</th></tr></thead><tbody><tr><td>微任务：</td><td>mic A</td></tr><tr><td>结果：</td><td>1, 5, 6, 2, 3,</td></tr></tbody></table><ul><li>执行微任务A</li></ul><table><thead><tr><th>宏任务：</th><th>mic D(1000ms delay), mic E, mic C, mic B,</th></tr></thead><tbody><tr><td>微任务：</td><td></td></tr><tr><td>结果：</td><td>1, 5, 6, 2, 3, 4,</td></tr></tbody></table><ul><li>执行宏任务E</li></ul><table><thead><tr><th>宏任务：</th><th>mic D(1000ms delay), mic C, mic B,</th></tr></thead><tbody><tr><td>微任务：</td><td></td></tr><tr><td>结果：</td><td>1, 5, 6, 2, 3, 4, 12,</td></tr></tbody></table><ul><li>执行宏任C</li></ul><table><thead><tr><th>宏任务：</th><th>mic D(1000ms delay), mic B,</th></tr></thead><tbody><tr><td>微任务：</td><td>mic C</td></tr><tr><td>结果：</td><td>1, 5, 6, 2, 3, 4, 12, 7, 8,</td></tr></tbody></table><ul><li>执行微任务C</li></ul><table><thead><tr><th>宏任务：</th><th>mic D(1000ms delay), mic B,</th></tr></thead><tbody><tr><td>微任务：</td><td></td></tr><tr><td>结果：</td><td>1, 5, 6, 2, 3, 4,12, 7, 8, 9</td></tr></tbody></table><ul><li>执行宏任B</li></ul><table><thead><tr><th>宏任务：</th><th>mic D(1000ms delay),</th></tr></thead><tbody><tr><td>微任务：</td><td></td></tr><tr><td>结果：</td><td>1, 5, 6, 2, 3, 4,12,7, 8, 9, 10</td></tr></tbody></table><ul><li>执行宏任D</li></ul><table><thead><tr><th>宏任务：</th><th></th></tr></thead><tbody><tr><td>微任务：</td><td></td></tr><tr><td>结果：</td><td>1, 5, 6, 2, 3, 4,12,7, 8, 9, 10, 11</td></tr></tbody></table><h3 id="题目2："><a href="#题目2：" class="headerlink" title="题目2："></a>题目2：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// syn</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">asyFunction</span> () &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>); <span class="comment">// 此处要等上一句回调成功后再添加到队列</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">6</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// syn  直接执行promise的内容！</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">10</span>);</span><br><span class="line">  <span class="title function_">resolve</span>();</span><br><span class="line">  <span class="comment">//    mic 1</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">11</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// syn</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">7</span>);</span><br><span class="line"><span class="comment">// mac 1</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">8</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="comment">// mac 2</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">9</span>)</span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br><span class="line"><span class="comment">// syn</span></span><br><span class="line"><span class="title function_">asyFunction</span>().<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// mic 3</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">// 此处回调，要等asyFunction的都执行后再添加到队列中</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="/01-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1/1650875287465-c55a9a4f-dc13-4513-98a4-80724ed51837.png" alt="img"></p><h3 id="题目3："><a href="#题目3：" class="headerlink" title="题目3："></a>题目3：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 调用后 syn</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="comment">// async2() 是同步任务 ！！！</span></span><br><span class="line">  <span class="comment">// mic 1；</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">async2</span>();</span><br><span class="line">  <span class="comment">// syn</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>); <span class="comment">// 此句相当于在.then 中的</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// mic 3</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// mac 1</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// syn</span></span><br><span class="line"><span class="title function_">async1</span>();</span><br><span class="line"><span class="comment">// syn</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">6</span>);</span><br></pre></td></tr></table></figure><p><img src="/01-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1/1650875335099-c4123e74-4156-4c5d-9221-e9f54b86578d.png" alt="img"></p><p><strong>分析过程：</strong></p><ul><li>执行同步任务：（<strong>遇到</strong> <strong>Promise</strong>**.<strong><strong>resolve</strong></strong><em>()*</em>***.**<strong>then 直接执行，虽没有new Promise的同步任务执行，但会将then的微任务挂载到队列中</strong>）</li></ul><table><thead><tr><th>宏任务：</th><th>mic 3, mic 1,</th></tr></thead><tbody><tr><td>微任务：</td><td>mac 1,</td></tr><tr><td>结果：</td><td>1, 2, 6，</td></tr></tbody></table><p>参考：</p><p><a class="link" target="_blank" rel="noopener" href="http://ruanyifeng.com/blog/2014/10/event-loop.html">http://ruanyifeng.com/blog/2014/10/event-loop.html<i class="fas fa-external-link-alt"></i></a></p><p><a class="link" target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_DOM_API/Microtask_guide/In_depth">https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_DOM_API/Microtask_guide/In_depth<i class="fas fa-external-link-alt"></i></a></p></div><div class="post-copyright-info-container border-box"><div class="copyright-info-content border-box"><div class="copyright-info-top border-box"><div class="copyright-post-title border-box text-ellipsis">微任务与宏任务</div><div class="copyright-post-link border-box text-ellipsis">01-微任务与宏任务/</div></div><div class="copyright-info-bottom border-box"><div class="copyright-post-author bottom-item"><div class="type">作者</div><div class="content">ChengShuomin</div></div><div class="post-time bottom-item"><div class="type">发布于</div><div class="content">2021-08-27</div></div><div class="post-license bottom-item"><div class="type">许可证</div><div class="content tooltip" data-tooltip-content="CC BY-NC-SA 4.0"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deedzh-CN" target="_blank"><i class="fa-brands fa-creative-commons"></i> <i class="fa-brands fa-creative-commons-by"></i> <i class="fa-brands fa-creative-commons-nc"></i> <i class="fa-brands fa-creative-commons-sa"></i></a></div></div></div><div class="copyright-info-bottom border-box">著作权归作者所有，商业转载请联系作者获得授权，非商业转载请注明出处。<br>本博客所有文章著作权归作者所有，依据 CC BY-NC-SA 4.0 许可证进行授权。</div><i class="copyright-bg fa-solid fa-copyright"></i></div><div class="copy-copyright-info flex-center tooltip" data-tooltip-content="复制版权信息" data-tooltip-offset-y="-2px"><i class="fa-solid fa-copy"></i></div></div><div class="post-bottom-tags-and-share border-box"><div><ul class="post-tags-box border-box"><li class="tag-item border-box"><i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/JavaScript/">JavaScript</a></li></ul></div><div><div class="post-share-container border-box"><ul class="share-list-wrap border-box"><li class="qq share-item border-box flex-center tooltip" data-tooltip-content="分享到 QQ"><i class="fa-brands fa-qq"></i></li><li class="wechat share-item border-box flex-center tooltip tooltip-img" data-tooltip-content="分享到微信" data-tooltip-img-tip="微信扫一扫" data-tooltip-img-style="background-color: #fff; top: -10px; padding: 0.6rem 0.6rem 0.1rem 0.6rem;"><i class="fa-brands fa-weixin"></i></li><li class="weibo share-item border-box flex-center tooltip" data-tooltip-content="分享到微博"><i class="fa-brands fa-weibo"></i></li></ul></div></div></div><div class="post-nav border-box"><div class="prev-post"><a class="prev" rel="prev" href="/02-%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81/" title="防抖节流"><span class="left arrow-icon flex-center"><i class="fas fa-chevron-left"></i> </span><span class="title flex-center"><span class="post-nav-title-item text-ellipsis">防抖节流</span> <span class="post-nav-item">上一篇</span></span></a></div><div class="next-post"><a class="next" rel="next" href="/05-%E9%97%AD%E5%8C%85/" title="闭包"><span class="title flex-center"><span class="post-nav-title-item text-ellipsis">闭包</span> <span class="post-nav-item">下一篇</span> </span><span class="right arrow-icon flex-center"><i class="fas fa-chevron-right"></i></span></a></div></div></div></div><div class="pc-post-toc right-toc"><div class="post-toc-wrap border-box"><div class="post-toc border-box"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E8%BF%9B%E7%A8%8B-amp-%E7%BA%BF%E7%A8%8B"><span class="nav-text">1. 进程 &amp; 线程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-%E8%BF%9B%E7%A8%8B%EF%BC%9A"><span class="nav-text">1.1 进程：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-%E7%BA%BF%E7%A8%8B%EF%BC%9A"><span class="nav-text">1.2 线程：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-JS%E5%8D%95%E7%BA%BF%E7%A8%8B%EF%BC%9A"><span class="nav-text">1.3 JS单线程：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93%E8%BF%9B%E7%A8%8B%EF%BC%9A"><span class="nav-text">1.4 浏览器渲染进程：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-JavaScript%E7%9A%84%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="nav-text">2. JavaScript的运行机制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF-Event-Loop"><span class="nav-text">2.1 事件循环 Event Loop</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-1"><span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E5%90%8C%E6%AD%A5%E4%BB%BB%E5%8A%A1-synchronous-%E4%B8%8E%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1-asynchronous"><span class="nav-text">2.2 同步任务(synchronous)与异步任务(asynchronous)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1%E4%B8%BE%E4%BE%8B%EF%BC%9A"><span class="nav-text">异步任务举例：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1"><span class="nav-text">3. 微任务与宏任务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%AE%E4%BB%BB%E5%8A%A1%EF%BC%88microtask%EF%BC%89"><span class="nav-text">微任务（microtask）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8F%E4%BB%BB%E5%8A%A1%EF%BC%88macrotask%EF%BC%89"><span class="nav-text">宏任务（macrotask）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F%E8%A7%84%E5%88%99%E7%82%B9%EF%BC%9A"><span class="nav-text">执行顺序规则点：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E8%BF%87%E7%A8%8B%EF%BC%9A"><span class="nav-text">完整事件循环过程：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E5%A6%82%E4%BD%95%E5%88%86%E6%9E%90%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="nav-text">4. 如何分析执行顺序</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE1%EF%BC%9A"><span class="nav-text">题目1：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE2%EF%BC%9A"><span class="nav-text">题目2：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE3%EF%BC%9A"><span class="nav-text">题目3：</span></a></li></ol></li></ol></div></div></div></div></div></div></div><div class="page-main-content-bottom border-box"><footer class="footer border-box"><div class="copyright-info info-item">&copy;&nbsp;<span>2021</span>&nbsp;-&nbsp;2025 &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/">ChengShuomin</a></div><div class="theme-info info-item">Powered by&nbsp;<a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;&&nbsp;Theme&nbsp;<a class="keep-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep</a></div></footer></div></div><div class="post-tools right-toc"><div class="post-tools-container border-box"><ul class="post-tools-list border-box"><li class="tools-item flex-center toggle-show-toc"><i class="fas fa-list"></i></li><li class="tools-item flex-center full-screen"><i class="fa-solid fa-expand"></i></li></ul></div></div><div class="side-tools"><div class="side-tools-container border-box"><ul class="side-tools-list side-tools-show-handle border-box"><li class="tools-item tool-font-adjust-plus flex-center"><i class="fas fa-search-plus"></i></li><li class="tools-item tool-font-adjust-minus flex-center"><i class="fas fa-search-minus"></i></li><li class="tools-item tool-toggle-theme-mode flex-center"><i class="fas fa-moon"></i></li><li class="tools-item tool-scroll-to-bottom flex-center"><i class="fas fa-arrow-down"></i></li></ul><ul class="exposed-tools-list border-box"><li class="tools-item toggle-show-toc-tablet flex-center"><i class="fas fa-list"></i></li><li class="tools-item tool-toggle-show flex-center"><i class="fas fa-cog fa-spin"></i></li><li class="tools-item tool-scroll-to-top flex-center show-arrow"><i class="arrow fas fa-arrow-up"></i> <span class="percent"></span></li></ul></div></div><div class="zoom-in-image-mask"><img class="zoom-in-image"></div><div class="tablet-post-toc-mask"><div class="tablet-post-toc"><div class="post-toc-wrap border-box"><div class="post-toc border-box"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E8%BF%9B%E7%A8%8B-amp-%E7%BA%BF%E7%A8%8B"><span class="nav-text">1. 进程 &amp; 线程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-%E8%BF%9B%E7%A8%8B%EF%BC%9A"><span class="nav-text">1.1 进程：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-%E7%BA%BF%E7%A8%8B%EF%BC%9A"><span class="nav-text">1.2 线程：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-JS%E5%8D%95%E7%BA%BF%E7%A8%8B%EF%BC%9A"><span class="nav-text">1.3 JS单线程：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93%E8%BF%9B%E7%A8%8B%EF%BC%9A"><span class="nav-text">1.4 浏览器渲染进程：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-JavaScript%E7%9A%84%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="nav-text">2. JavaScript的运行机制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF-Event-Loop"><span class="nav-text">2.1 事件循环 Event Loop</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#-1"><span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E5%90%8C%E6%AD%A5%E4%BB%BB%E5%8A%A1-synchronous-%E4%B8%8E%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1-asynchronous"><span class="nav-text">2.2 同步任务(synchronous)与异步任务(asynchronous)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1%E4%B8%BE%E4%BE%8B%EF%BC%9A"><span class="nav-text">异步任务举例：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1"><span class="nav-text">3. 微任务与宏任务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%AE%E4%BB%BB%E5%8A%A1%EF%BC%88microtask%EF%BC%89"><span class="nav-text">微任务（microtask）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8F%E4%BB%BB%E5%8A%A1%EF%BC%88macrotask%EF%BC%89"><span class="nav-text">宏任务（macrotask）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F%E8%A7%84%E5%88%99%E7%82%B9%EF%BC%9A"><span class="nav-text">执行顺序规则点：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E8%BF%87%E7%A8%8B%EF%BC%9A"><span class="nav-text">完整事件循环过程：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E5%A6%82%E4%BD%95%E5%88%86%E6%9E%90%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="nav-text">4. 如何分析执行顺序</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE1%EF%BC%9A"><span class="nav-text">题目1：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE2%EF%BC%9A"><span class="nav-text">题目2：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE3%EF%BC%9A"><span class="nav-text">题目3：</span></a></li></ol></li></ol></div></div></div></div></main><script src="/js/utils.js"></script><script src="/js/header-shrink.js"></script><script src="/js/back2top.js"></script><script src="/js/toggle-theme.js"></script><script src="/js/code-block.js"></script><script src="/js/main.js"></script><script src="/js/main.js"></script><script src="/js/libs/anime.min.js"></script><div><script src="/js/post/post-helper.js"></script><script src="/js/post/toc.js"></script><script src="/js/post/copyright-info.js"></script><script src="/js/post/share.js"></script></div></body></html>