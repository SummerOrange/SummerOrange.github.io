<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="chengshuomin"><title>学习笔记</title><meta name="description" content="chengshuomin blog"><meta name="keywords" content="Blog,博客,chengshuomin"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="shortcut icon" type="image/x-icon" href="/images/favicon1.svg"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/insight.css"><link rel="stylesheet" href="/css/search.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/js/jquery.js"></script><meta name="generator" content="Hexo 6.1.0"></head><body><div class="page-top animated fadeInDown"><div class="nav"><li> <a href="/">首页</a></li><li> <a href="/archives">归档</a></li><li> <a href="/tags">标签</a></li></div><div class="information"><div class="nav_right_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)" style="display:none;"> </a></li><li><a class="fa fa-search" onclick="openWindow();"></a></li></div><div class="avatar"><img src="/images/logo.jpg"></div></div></div><div class="sidebar animated fadeInDown"><div class="sidebar-top"><div class="logo-title"><div class="title"><img src="/images/title.svg" style="width:200px;" alt="favicon"><h3 title=""><a href="/">学习笔记</a></h3><div class="description"><p>chengshuomin blog</p></div></div><ul class="social-links"></ul></div></div><div class="footer"><div class="p"><span> 全站 CC-BY-SA-3.0</span><i class="fa fa-star"></i><span> chengshuomin</span></div><div class="by_farbox"><span>Powered by</span><a href="https://hexo.io/zh-cn/" target="_blank">Hexo</a><span> &</span><span>Anatolo</span></div><div class="beian"></div></div></div><div class="main"><div class="autopagerize_page_element"><div class="content"><div class="post animated fadeInDown"><div class="post-title"><h3><a href="/01-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1/">微任务与宏任务</a></h3></div><div class="post-content"><div class="card"><p><p>JavaScript是一门单线程、异步、非阻塞、解析类型脚本语言。</p>
<p>宏任务有Event Table、Event Queue，微任务有Event Queue</p>
<p>javascript是一门单线程、异步、非阻塞、解析类型脚本语言。</p>
<h2 id="1-进程-amp-线程"><a href="#1-进程-amp-线程" class="headerlink" title="1. 进程 &amp; 线程"></a>1. 进程 &amp; 线程</h2><h3 id="1-1-进程："><a href="#1-1-进程：" class="headerlink" title="1.1 进程："></a>1.1 进程：</h3><ul>
<li>程序运行的实例</li>
<li>同一程序可以产生多个进程</li>
<li>一个进程包含一个或多个线程</li>
</ul>
<h3 id="1-2-线程："><a href="#1-2-线程：" class="headerlink" title="1.2 线程："></a>1.2 线程：</h3><ul>
<li>操作系统能够进行运算调度的最小单位</li>
<li>一次只能执行一个任务</li>
<li>有自己的调用栈、寄存器环境</li>
<li>同一进程的线程共享进程资源</li>
</ul>
<h3 id="1-3-JS单线程："><a href="#1-3-JS单线程：" class="headerlink" title="1.3 JS单线程："></a>1.3 JS单线程：</h3><p>JavaScript 单线程指的是浏览器中负责解释和执行 JavaScript 代码的只有一个线程，即为<strong>JS引擎线程</strong></p>
<h3 id="1-4-浏览器渲染是多线程："><a href="#1-4-浏览器渲染是多线程：" class="headerlink" title="1.4 浏览器渲染是多线程："></a>1.4 浏览器渲染是多线程：</h3><p>但浏览器的渲染进程是提供多个线程的，如下：</p>
<ul>
<li>JS引擎线程</li>
<li>事件触发线程</li>
<li>定时触发器线程（定时器触发线程只是为 setTimeout(…, n) 定时，n秒后，把它对应的回调函数(callback)交给 <strong>任务队列</strong> 维护，JS引擎线程会在适当的时候去任务队列取出任务并执行。）</li>
<li>异步http请求线程</li>
<li>GUI渲染线程</li>
</ul>
<p><img src="/01-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1/1650942425429-e24c82db-1b8e-4420-bebe-bb6f759831e7.png" alt="img"></p>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3><h2 id="2-JavaScript的运行机制"><a href="#2-JavaScript的运行机制" class="headerlink" title="2. JavaScript的运行机制"></a><strong>2. JavaScript的运行机制</strong></h2><h3 id="2-1-事件循环-event-loop"><a href="#2-1-事件循环-event-loop" class="headerlink" title="2.1 事件循环**(event loop)**"></a>2.1 事件循环**(<strong><strong>event</strong> <strong>loop</strong></strong>)**</h3><p><strong>事件触发线程</strong> 控制通过 <strong>事件循环</strong> <strong>event loop</strong> 的机制，维护<strong>任务队列。</strong></p>
<p>JS引擎线程遇到异步(DOM事件监听、网络请求、setTimeout计时器等…)，会交给相应的线程单独去维护异步任务，等待某个时机(计时器结束、网络请求成功、用户点击DOM)，然后由 <strong>事件触发线程</strong> 将异步对应的 <strong>回调函数</strong> 加入到消息队列中，消息队列中的回调函数等待被执行。</p>
<p>“任务队列”是一个先进先出的数据结构，排在前面的事件，优先被主线程读取。</p>
<p>具体来说，异步执行的运行机制如下：</p>
<p>（同步执行也是如此，因为它可以被视为没有异步任务的异步执行。）</p>
<p>（1）所有同步任务都在主线程上执行，形成一个<a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2013/11/stack.html">执行栈</a>（execution context stack）。</p>
<p>（2）主线程之外，还存在一个”任务队列”（task queue）。只要异步任务有了运行结果，就在”任务队列”之中放置一个事件。</p>
<p>（3）一旦”执行栈”中的所有同步任务执行完毕，系统就会读取”任务队列”，看看里面有哪些事件。那些对应的异步任务，于是结束等待状态，进入执行栈，开始执行。</p>
<p>（4）主线程不断重复上面的第三步。</p>
<h3 id="-1"><a href="#-1" class="headerlink" title=""></a><img src="/01-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1/1664127178058-15b84125-8ae8-45e5-b457-301e7317549f.png" alt="img"></h3><h3 id="-2"><a href="#-2" class="headerlink" title=""></a></h3><h3 id="2-2-同步任务-synchronous-与异步任务-asynchronous"><a href="#2-2-同步任务-synchronous-与异步任务-asynchronous" class="headerlink" title="2.2 同步任务**(synchronous)与异步任务(asynchronous)**"></a>2.2 同步任务**(synchronous)<strong>与异步任务</strong>(asynchronous)**</h3><p><img src="/01-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1/1664127433261-b2c2fd79-c33f-49cc-96e0-2a20739068bb.png" alt="img"></p>
<p>同步任务指的是，在主线程上排队执行的任务，只有前一个任务执行完毕，才能执行后一个任务；</p>
<p>异步任务指的是，不进入主线程、而进入”任务队列”（task queue）的任务，只有”任务队列”通知主线程，某个异步任务可以执行了，该任务才会进入主线程执行。</p>
<h4 id="异步任务举例："><a href="#异步任务举例：" class="headerlink" title="异步任务举例："></a>异步任务举例：</h4><ul>
<li>网络请求</li>
<li>计时器</li>
<li>DOM事件监听</li>
</ul>
<h2 id="3-微任务与宏任务"><a href="#3-微任务与宏任务" class="headerlink" title="3. 微任务与宏任务"></a>3. 微任务与宏任务</h2><p>任务队列（宏任务）和微任务队列的区别很简单，但却很重要：</p>
<ul>
<li>当执行来自任务队列中的任务时，在每一次新的事件循环开始迭代的时候运行时都会执行队列中的每个任务。在每次迭代开始之后加入到队列中的任务需要<strong>在下一次迭代开始之后才会被执行</strong>.</li>
<li>每次当一个任务退出且执行上下文为空的时候，微任务队列中的每一个微任务会依次被执行。不同的是它会等到微任务队列为空才会停止执行——即使中途有微任务加入。换句话说，微任务可以添加新的微任务到队列中，并在下一个任务开始执行之前且当前事件循环结束之前执行完所有的微任务。</li>
</ul>
<h3 id="微任务（microtask）"><a href="#微任务（microtask）" class="headerlink" title="微任务（microtask）"></a>微任务（microtask）</h3><ul>
<li><code>**Promise.then**</code>、<code>**Promise.catch**</code> 和 <code>**Promise.finally**</code></li>
<li><code>process.nextTick</code> (Node.js 环境)</li>
<li>Object.observe() 异步地监视一个对象的修改（已废弃）</li>
<li>MutationObserver</li>
</ul>
<h3 id="宏任务（macrotask）"><a href="#宏任务（macrotask）" class="headerlink" title="宏任务（macrotask）"></a>宏任务（macrotask）</h3><ul>
<li><code>**script**</code></li>
<li>异步网络请求（XHR）</li>
<li><code>setTimeout</code></li>
<li><code>setInterval</code></li>
<li>文件操作(I&#x2F;O)</li>
<li><code>setImmediate</code>(Node.js 环境 和 IE10 支持) （把一些需要长时间运行的操作放在一个回调函数里）</li>
<li><code>UI rendering</code></li>
</ul>
<h3 id="执行顺序规则："><a href="#执行顺序规则：" class="headerlink" title="执行顺序规则："></a>执行顺序规则：</h3><ul>
<li><strong>new Promise 是同步任务，****new Promise 参数中的代码会立即执行</strong></li>
<li><strong>new Promise.then 是微任务，then 的回调函数分发到微任务队列</strong> <strong>(then</strong>链式写法，即then方法后面再调用另一个then方法，第一个回调函数完成以后，会将返回结果作为参数，传入第二个回调函数**)**</li>
<li>process.nextTick分发到微任务队列</li>
<li>setTimeout，其回调函数被分发到宏任务Event Queue（执行规则：从上到下排序，先进先执行）中（回调会在微任务执行后再执行）</li>
<li>async函数还是基于Promise的一些封装，<strong>async同new Promise</strong>，是同步任务</li>
<li><strong>await 同Promise.then</strong> 是微任务，多个await时，等执行第一个awiait后，再将其后面的任务执行添加到队列。 <strong>await 后面一般是promise，如果不是直接执行返回。await 后面的函数直接按规则执行，如果是promise 就等执行结果得到后，继续执行下面的，这个过程相当于then。</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>) <span class="comment">// 这儿是最先执行的</span></span><br><span class="line">  <span class="title function_">resolve</span>()</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br><span class="line"><span class="comment">// 1, 2, 3, 4</span></span><br></pre></td></tr></table></figure>

<h3 id="完整事件循环过程："><a href="#完整事件循环过程：" class="headerlink" title="完整事件循环过程："></a>完整事件循环<strong>过程：</strong></h3><p><img src="/01-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1/1664127165470-bab034d7-83c7-4ca9-94ce-370ffa638565.png" alt="img"></p>
<h2 id="4-如何分析执行顺序"><a href="#4-如何分析执行顺序" class="headerlink" title="4. 如何分析执行顺序"></a>4. 如何分析执行顺序</h2><h3 id="题目1："><a href="#题目1：" class="headerlink" title="题目1："></a>题目1：</h3><p><strong>分析过程：</strong></p>
<ul>
<li><strong>先执行同步任务，遇到宏任务放宏任务队列，遇到微任务放到微任务队列。</strong></li>
<li><strong>主线程执行完一圈后，先执行微任务队列，再执行宏任务。</strong></li>
</ul>
<p>（动态修改两个队列：执行到时，增加微任务和宏任务队列；执行后，删掉队列的值）</p>
<ol>
<li>区分同步任务、微任务、宏任务</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 同步任务</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line"><span class="comment">// 宏任务 A</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 同步任务</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">  <span class="comment">// 宏任务 B</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">10</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 同步任务</span></span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3&#x27;</span>);</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">    <span class="comment">// 微任务 A</span></span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;4&#x27;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 同步任务</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;5&#x27;</span>);</span><br><span class="line">  <span class="comment">// 宏任务 D</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">11</span>)</span><br><span class="line">  &#125;, <span class="number">1000</span>) <span class="comment">// 若此处没有1000毫秒的延迟，则先执行宏任务D，再执行宏任务E</span></span><br><span class="line">  <span class="title function_">resolve</span>(</span><br><span class="line">    <span class="comment">// 宏任务 E</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">12</span>)</span><br><span class="line">    &#125;))</span><br><span class="line">  <span class="comment">// 微任务 B</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;6&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 宏任务 C</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// 同步任务</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;7&#x27;</span>);</span><br><span class="line">  <span class="comment">// 同步任务</span></span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;8&#x27;</span>);</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">    <span class="comment">// 微任务 C</span></span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;9&#x27;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ol>
<li>分别记录宏任务和微任务队列，动态入、出队列</li>
</ol>
<ul>
<li>执行同步任务：</li>
</ul>
<table>
<thead>
<tr>
<th>宏任务：</th>
<th>mac A,  mic D(1000ms delay), mic E,  mic C,</th>
</tr>
</thead>
<tbody><tr>
<td>微任务：</td>
<td>mic B,</td>
</tr>
<tr>
<td>结果：</td>
<td>1, 5,</td>
</tr>
</tbody></table>
<ul>
<li>执行微任务B</li>
</ul>
<table>
<thead>
<tr>
<th>宏任务：</th>
<th>mac A,  mic D(1000ms delay), mic E,  mic C,</th>
</tr>
</thead>
<tbody><tr>
<td>微任务：</td>
<td></td>
</tr>
<tr>
<td>结果：</td>
<td>1, 5, 6</td>
</tr>
</tbody></table>
<ul>
<li>执行宏任务A</li>
</ul>
<table>
<thead>
<tr>
<th>宏任务：</th>
<th>mic D(1000ms delay), mic E,  mic C, mic B,</th>
</tr>
</thead>
<tbody><tr>
<td>微任务：</td>
<td>mic A</td>
</tr>
<tr>
<td>结果：</td>
<td>1, 5, 6, 2, 3,</td>
</tr>
</tbody></table>
<ul>
<li>执行微任务A</li>
</ul>
<table>
<thead>
<tr>
<th>宏任务：</th>
<th>mic D(1000ms delay), mic E, mic C, mic B,</th>
</tr>
</thead>
<tbody><tr>
<td>微任务：</td>
<td></td>
</tr>
<tr>
<td>结果：</td>
<td>1, 5, 6, 2, 3, 4,</td>
</tr>
</tbody></table>
<ul>
<li>执行宏任务E</li>
</ul>
<table>
<thead>
<tr>
<th>宏任务：</th>
<th>mic D(1000ms delay),  mic C, mic B,</th>
</tr>
</thead>
<tbody><tr>
<td>微任务：</td>
<td></td>
</tr>
<tr>
<td>结果：</td>
<td>1, 5, 6, 2, 3, 4, 12,</td>
</tr>
</tbody></table>
<ul>
<li>执行宏任C</li>
</ul>
<table>
<thead>
<tr>
<th>宏任务：</th>
<th>mic D(1000ms delay), mic B,</th>
</tr>
</thead>
<tbody><tr>
<td>微任务：</td>
<td>mic C</td>
</tr>
<tr>
<td>结果：</td>
<td>1, 5, 6, 2, 3, 4, 12, 7, 8,</td>
</tr>
</tbody></table>
<ul>
<li>执行微任务C</li>
</ul>
<table>
<thead>
<tr>
<th>宏任务：</th>
<th>mic D(1000ms delay), mic B,</th>
</tr>
</thead>
<tbody><tr>
<td>微任务：</td>
<td></td>
</tr>
<tr>
<td>结果：</td>
<td>1, 5, 6, 2, 3, 4,12, 7, 8, 9</td>
</tr>
</tbody></table>
<ul>
<li>执行宏任B</li>
</ul>
<table>
<thead>
<tr>
<th>宏任务：</th>
<th>mic D(1000ms delay),</th>
</tr>
</thead>
<tbody><tr>
<td>微任务：</td>
<td></td>
</tr>
<tr>
<td>结果：</td>
<td>1, 5, 6, 2, 3, 4,12,7, 8, 9, 10</td>
</tr>
</tbody></table>
<ul>
<li>执行宏任D</li>
</ul>
<table>
<thead>
<tr>
<th>宏任务：</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>微任务：</td>
<td></td>
</tr>
<tr>
<td>结果：</td>
<td>1, 5, 6, 2, 3, 4,12,7, 8, 9, 10, 11</td>
</tr>
</tbody></table>
<h3 id="题目2："><a href="#题目2：" class="headerlink" title="题目2："></a>题目2：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// syn</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">asyFunction</span> () &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>); <span class="comment">// 此处要等上一句回调成功后再添加到队列</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">6</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// syn  直接执行promise的内容！</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">10</span>);</span><br><span class="line">  <span class="title function_">resolve</span>();</span><br><span class="line">  <span class="comment">//    mic 1</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">11</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// syn</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">7</span>);</span><br><span class="line"><span class="comment">// mac 1</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">8</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="comment">// mac 2</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">9</span>)</span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br><span class="line"><span class="comment">// syn</span></span><br><span class="line"><span class="title function_">asyFunction</span>().<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// mic 3</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">// 此处回调，要等asyFunction的都执行后再添加到队列中</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><img src="/01-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1/1650875287465-c55a9a4f-dc13-4513-98a4-80724ed51837.png" alt="img"></p>
<h3 id="题目3："><a href="#题目3：" class="headerlink" title="题目3："></a>题目3：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 调用后 syn</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="comment">// async2() 是同步任务 ！！！</span></span><br><span class="line">  <span class="comment">// mic 1；</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">async2</span>();</span><br><span class="line">  <span class="comment">// syn</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>); <span class="comment">// 此句相当于在.then 中的</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// mic 3</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// mac 1</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// syn</span></span><br><span class="line"><span class="title function_">async1</span>();</span><br><span class="line"><span class="comment">// syn</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">6</span>);</span><br></pre></td></tr></table></figure>

<p><img src="/01-%E5%BE%AE%E4%BB%BB%E5%8A%A1%E4%B8%8E%E5%AE%8F%E4%BB%BB%E5%8A%A1/1650875335099-c4123e74-4156-4c5d-9221-e9f54b86578d.png" alt="img"></p>
<p><strong>分析过程：</strong></p>
<ul>
<li>执行同步任务：（<strong>遇到</strong> <strong>Promise</strong>**.<strong><strong>resolve</strong></strong><em>()*</em>***.**<strong>then 直接执行，虽没有new Promise的同步任务执行，但会将then的微任务挂载到队列中</strong>）</li>
</ul>
<table>
<thead>
<tr>
<th>宏任务：</th>
<th>mic 3, mic 1,</th>
</tr>
</thead>
<tbody><tr>
<td>微任务：</td>
<td>mac 1,</td>
</tr>
<tr>
<td>结果：</td>
<td>1, 2, 6，</td>
</tr>
</tbody></table>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="http://ruanyifeng.com/blog/2014/10/event-loop.html">http://ruanyifeng.com/blog/2014/10/event-loop.html</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_DOM_API/Microtask_guide/In_depth">https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_DOM_API/Microtask_guide/In_depth</a></p>
</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2021-08-27</span><i class="fa fa-tag"></i><a class="tag" href="/tags/JavaScript/" title="JavaScript">JavaScript </a><span class="leancloud_visitors"></span><span>大约2334个字, 7分钟46秒读完</span></div></div></div></div><div class="post animated fadeInDown"><div class="post-title"><h3><a href="/902-Echarts%E5%B8%B8%E7%94%A8%E6%A0%B7%E5%BC%8F/">Echarts常用样式</a></h3></div><div class="post-content"><div class="card"><p><h2 id="bar-柱-渐变色-amp-圆角"><a href="#bar-柱-渐变色-amp-圆角" class="headerlink" title=". bar 柱 渐变色 &amp; 圆角"></a>. bar 柱 渐变色 &amp; 圆角</h2><ul>
<li>bar 渐变色</li>
<li>bar 斜向渐变色</li>
<li>每个柱颜色不同<img src="/902-Echarts%E5%B8%B8%E7%94%A8%E6%A0%B7%E5%BC%8F/image (2).png" alt="image (2)" style="zoom:98%;"></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 0, 0, 1, 1, 分别代表 右/下/左/上</span></span><br><span class="line"><span class="comment">// 0, 0, 1, 1, 表示 斜向 渐变</span></span><br><span class="line"><span class="comment">// 0, 0, 0, 1, 表示 由上到下 渐变</span></span><br><span class="line"><span class="keyword">const</span> barColors = [<span class="keyword">new</span> echarts.<span class="property">graphic</span>.<span class="title class_">LinearGradient</span>(</span><br><span class="line">        <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>,</span><br><span class="line">        [</span><br><span class="line">            &#123;<span class="attr">offset</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;#FF5A56&#x27;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">offset</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;#F1961B&#x27;</span>&#125;,</span><br><span class="line">        ]</span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> echarts.<span class="property">graphic</span>.<span class="title class_">LinearGradient</span>(</span><br><span class="line">        <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>,</span><br><span class="line">        [</span><br><span class="line">            &#123;<span class="attr">offset</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;#04EFFE&#x27;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">offset</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;#4B9EE7&#x27;</span>&#125;,</span><br><span class="line">        ]</span><br><span class="line">    ),</span><br><span class="line">    <span class="keyword">new</span> echarts.<span class="property">graphic</span>.<span class="title class_">LinearGradient</span>(</span><br><span class="line">        <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>,</span><br><span class="line">        [</span><br><span class="line">            &#123;<span class="attr">offset</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;#A661C1&#x27;</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">offset</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;#FA71CE&#x27;</span>&#125;,</span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">                    <span class="attr">series</span>: [</span><br><span class="line">                        &#123;</span><br><span class="line">                            <span class="attr">data</span>: props.<span class="property">option</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">x, i</span>) =&gt;</span> x.<span class="property">y_axis_value</span>),</span><br><span class="line">                            <span class="attr">barMaxWidth</span>: <span class="string">&#x27;40%&#x27;</span>,</span><br><span class="line">                            <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">                                <span class="comment">// 第一个值表示顶部的左上角，第二个值表示顶部右上角</span></span><br><span class="line">                                <span class="comment">// 第三个值表示底部左下角，第四个值表示底部右下角</span></span><br><span class="line">                                <span class="attr">barBorderRadius</span>:[<span class="number">4</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">                                <span class="attr">color</span>: <span class="keyword">function</span> (<span class="params">params</span>)&#123;</span><br><span class="line">                                    <span class="keyword">return</span> barColors[params.<span class="property">dataIndex</span>]</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;,</span><br><span class="line">                            <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">                        &#125;</span><br><span class="line">                    ]</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h2 id="2-echarts-官网打不开"><a href="#2-echarts-官网打不开" class="headerlink" title="2. echarts 官网打不开"></a>2. echarts 官网打不开</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一步：找到目录C:\Windows\System32\drivers\etc下的hosts文件，添加以下字段（两个都试试，哪一个可以用就用那个）：</span></span><br><span class="line"><span class="number">207.244</span><span class="number">.88</span><span class="number">.140</span>  echarts.<span class="property">apache</span>.<span class="property">org</span></span><br><span class="line"><span class="number">151.101</span><span class="number">.2</span><span class="number">.132</span>   echarts.<span class="property">apache</span>.<span class="property">org</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二步：打开window终端刷新DNS缓存，输入以下命令：</span></span><br><span class="line">ipconfig/flushdns</span><br><span class="line"></span><br><span class="line">————————————————</span><br><span class="line">版权声明：本文为<span class="variable constant_">CSDN</span>博主「木屋x」的原创文章，遵循<span class="variable constant_">CC</span> <span class="number">4.0</span> <span class="variable constant_">BY</span>-<span class="variable constant_">SA</span>版权协议，转载请附上原文出处链接及本声明。</span><br><span class="line">原文链接：<span class="attr">https</span>:<span class="comment">//blog.csdn.net/qq_34917408/article/details/124883186</span></span><br></pre></td></tr></table></figure>



<h2 id="3-环形图中间显示文字-amp-渐变背景色"><a href="#3-环形图中间显示文字-amp-渐变背景色" class="headerlink" title="3. 环形图中间显示文字 &amp; 渐变背景色"></a>3. 环形图中间显示文字 &amp; 渐变背景色</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// 环形图中间添加固定的文字，与series平级</span></span><br><span class="line">  <span class="attr">graphic</span>: [&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;text&#x27;</span>, <span class="comment">//通过不同top值可以设置上下显示</span></span><br><span class="line">    <span class="attr">left</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">    <span class="attr">top</span>: <span class="string">&#x27;45%&#x27;</span>,</span><br><span class="line">    <span class="attr">style</span>: &#123;</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;标题&#x27;</span>,</span><br><span class="line">      <span class="attr">textAlign</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">      <span class="attr">fill</span>: <span class="string">&#x27;blue&#x27;</span>, <span class="comment">//文字的颜色</span></span><br><span class="line">      <span class="attr">width</span>: <span class="number">30</span>,</span><br><span class="line">      <span class="attr">height</span>: <span class="number">30</span>,</span><br><span class="line">      <span class="attr">fontSize</span>: <span class="number">16</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;],</span><br><span class="line">  <span class="comment">// 渐变颜色             </span></span><br><span class="line">  <span class="attr">color</span>: [&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;radial&#x27;</span>,</span><br><span class="line">      <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">y</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">r</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">colorStops</span>: [&#123;</span><br><span class="line">          <span class="attr">offset</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;#FF5A56&#x27;</span> <span class="comment">// 0% 处的颜色</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">          <span class="attr">offset</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;#F1961B&#x27;</span> <span class="comment">// 100% 处的颜色</span></span><br><span class="line">      &#125;],</span><br><span class="line">      <span class="attr">global</span>: <span class="literal">false</span> <span class="comment">// 缺省为 false</span></span><br><span class="line">  &#125;,&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;radial&#x27;</span>,</span><br><span class="line">      <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">y</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">r</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">colorStops</span>: [&#123;</span><br><span class="line">          <span class="attr">offset</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;#04EFFE&#x27;</span> <span class="comment">// 0% 处的颜色</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">          <span class="attr">offset</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;#4B9EE7&#x27;</span> <span class="comment">// 100% 处的颜色</span></span><br><span class="line">      &#125;],</span><br><span class="line">      <span class="attr">global</span>: <span class="literal">false</span> <span class="comment">// 缺省为 false</span></span><br><span class="line">  &#125;,&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;radial&#x27;</span>,</span><br><span class="line">      <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">y</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">r</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">colorStops</span>: [&#123;</span><br><span class="line">          <span class="attr">offset</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;#A661C1&#x27;</span> <span class="comment">// 0% 处的颜色</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">          <span class="attr">offset</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;#FA71CE&#x27;</span> <span class="comment">// 100% 处的颜色</span></span><br><span class="line">      &#125;],</span><br><span class="line">      <span class="attr">global</span>: <span class="literal">false</span> <span class="comment">// 缺省为 false</span></span><br><span class="line">  &#125;],</span><br><span class="line">    <span class="attr">series</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">data</span>: props.<span class="property">option</span>.<span class="title function_">map</span>(<span class="function"><span class="params">x</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> tem = &#123;&#125;</span><br><span class="line">          tem.<span class="property">name</span> = x.<span class="property">x_axis_value</span></span><br><span class="line">          tem.<span class="property">value</span> = x.<span class="property">y_axis_value</span></span><br><span class="line">          <span class="keyword">return</span> tem</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;pie&#x27;</span>,</span><br><span class="line">        <span class="attr">radius</span>: [<span class="string">&#x27;50%&#x27;</span>, <span class="string">&#x27;70%&#x27;</span>],</span><br><span class="line">        <span class="attr">avoidLabelOverlap</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">label</span>: &#123;</span><br><span class="line">          <span class="attr">show</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="attr">position</span>: <span class="string">&#x27;center&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">emphasis</span>: &#123;</span><br><span class="line">          <span class="attr">label</span>: &#123;</span><br><span class="line">            <span class="attr">show</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">fontSize</span>: <span class="string">&#x27;12&#x27;</span>,</span><br><span class="line">            <span class="attr">fontWeight</span>: <span class="string">&#x27;bold&#x27;</span>,</span><br><span class="line">            <span class="attr">formatter</span>: <span class="string">&quot;&#123;c&#125;&quot;</span>  <span class="comment">// 中间显示值，默认显示文字</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">labelLine</span>: &#123;</span><br><span class="line">          <span class="attr">show</span>: <span class="literal">false</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="4-折线图-折线渐变"><a href="#4-折线图-折线渐变" class="headerlink" title="4. 折线图 折线渐变"></a>4. 折线图 折线渐变</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">series</span>: [&#123;<span class="attr">type</span>: <span class="string">&quot;line&quot;</span>,</span><br><span class="line">    <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">        <span class="attr">color</span>: barColors[<span class="number">0</span>],<span class="comment">//折线点的颜色</span></span><br><span class="line">        <span class="attr">lineStyle</span>: &#123;</span><br><span class="line">            <span class="attr">color</span>: barColors[<span class="number">0</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, &#123;<span class="attr">type</span>: <span class="string">&quot;line&quot;</span>,</span><br><span class="line">    <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">        <span class="attr">color</span>: barColors[<span class="number">0</span>],<span class="comment">//折线点的颜色</span></span><br><span class="line">        <span class="attr">lineStyle</span>: &#123;</span><br><span class="line">            <span class="attr">color</span>: barColors[<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, &#123;<span class="attr">type</span>: <span class="string">&quot;line&quot;</span>,</span><br><span class="line">    <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">        <span class="attr">color</span>: barColors[<span class="number">0</span>],<span class="comment">//折线点的颜色</span></span><br><span class="line">        <span class="attr">lineStyle</span>: &#123;</span><br><span class="line">            <span class="attr">color</span>: barColors[<span class="number">2</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>

</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2021-04-14</span><i class="fa fa-tag"></i><a class="tag" href="/tags/图/" title="图">图 </a><span class="leancloud_visitors"></span><span>大约640个字, 2分钟8秒读完</span></div></div></div></div><div class="post animated fadeInDown"><div class="post-title"><h3><a href="/05-%E9%97%AD%E5%8C%85/">闭包</a></h3></div><div class="post-content"><div class="card"><p><h2 id="1-闭包"><a href="#1-闭包" class="headerlink" title="1. 闭包"></a>1. 闭包</h2><p><strong>闭包让你可以在一个内层函数中访问到其外层函数的作用域。</strong></p>
<p>由于在Javascript语言中，只有函数内部的子函数才能读取局部变量，因此可以把闭包简单理解成”<strong>定义在一个函数内部的函数</strong>“。</p>
<p>结构：在函数内部返回一个函数。</p>
<p>在本质上，闭包就是将函数内部和函数外部连接起来的一座桥梁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function eg3()&#123;</span><br><span class="line">	var n = 9;</span><br><span class="line">	var f2 = function()&#123;</span><br><span class="line">		alert(n);</span><br><span class="line">	&#125;;</span><br><span class="line">	return f2;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">eg3()();</span><br><span class="line"></span><br><span class="line">//或</span><br><span class="line">function eg3()&#123;</span><br><span class="line">	var n = 9;</span><br><span class="line">	var f2 = function()&#123;</span><br><span class="line">		alert(n);</span><br><span class="line">	&#125;;</span><br><span class="line">	return f2();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">eg3();</span><br></pre></td></tr></table></figure>

<p><strong>闭包原理：</strong></p>
<p>Javascript 语言特有的”链式作用域”结构（chain scope），子对象会一级一级地向上寻找所有父对象的变量。所以，父对象的所有变量，对子对象都是可见的，反之则不成立。</p>
<h2 id="2-使用场景"><a href="#2-使用场景" class="headerlink" title="2. 使用场景"></a>2. 使用场景</h2><p><strong>闭包的主要用途：</strong></p>
<ul>
<li>读取函数内部的变量</li>
<li>让这些变量的值始终保持在内存中</li>
</ul>
<h3 id="2-1-使用闭包模拟私有方法及变量（封装）"><a href="#2-1-使用闭包模拟私有方法及变量（封装）" class="headerlink" title="2.1 使用闭包模拟私有方法及变量（封装）"></a>2.1 使用闭包模拟私有方法及变量（封装）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>)&#123;   </span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">&quot;default&quot;</span>;      </span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;   </span><br><span class="line">    getName : <span class="keyword">function</span>(<span class="params"></span>)&#123;   </span><br><span class="line">      <span class="keyword">return</span> name;   </span><br><span class="line">    &#125;,   </span><br><span class="line">    setName : <span class="keyword">function</span>(<span class="params">newName</span>)&#123;   </span><br><span class="line">      name = newName;   </span><br><span class="line">    &#125;   </span><br><span class="line">  &#125;   </span><br><span class="line">&#125;;   </span><br></pre></td></tr></table></figure>

<h3 id="2-2-函数防抖"><a href="#2-2-函数防抖" class="headerlink" title="2.2 函数防抖"></a>2.2 函数防抖</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> timer</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args)</span><br><span class="line">    &#125;, delay)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-缓存变量-or-方法"><a href="#2-3-缓存变量-or-方法" class="headerlink" title="2.3 缓存变量 or 方法"></a>2.3 缓存变量 or 方法</h3><p>f1是f2的父函数，而f2被赋给了一个全局变量，这导致f2始终在内存中，而f2的存在依赖于f1，因此f1也始终在内存中，不会在调用结束后，被垃圾回收机制（garbage collection）回收。nAdd相当于是一个setter。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">function Person()&#123;    </span><br><span class="line">    var name = &quot;default&quot;;       </span><br><span class="line">       </span><br><span class="line">    return &#123;    </span><br><span class="line">       getName : function()&#123;    </span><br><span class="line">           return name;    </span><br><span class="line">       &#125;,    </span><br><span class="line">       setName : function(newName)&#123;    </span><br><span class="line">           name = newName;    </span><br><span class="line">       &#125;    </span><br><span class="line">    &#125;    </span><br><span class="line">&#125;;    </span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">var john = Person();    </span><br><span class="line">print(john.getName());    </span><br><span class="line">john.setName(&quot;john&quot;);    </span><br><span class="line">print(john.getName());    </span><br><span class="line">     </span><br><span class="line">var jack = Person();    </span><br><span class="line">print(jack.getName());    </span><br><span class="line">jack.setName(&quot;jack&quot;);    </span><br><span class="line">print(jack.getName());</span><br></pre></td></tr></table></figure>

<h3 id="2-4-柯里化函数"><a href="#2-4-柯里化函数" class="headerlink" title="2.4 柯里化函数"></a>2.4 柯里化函数</h3><p>为了提升性能，使用柯里化可以缓存一部分能力。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Make a map and return a function for checking if a key</span></span><br><span class="line"><span class="comment"> * is in that map.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//创建一个map，返回一个检查key是否在map中的函数</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">makeMap</span> (</span><br><span class="line">  <span class="attr">str</span>: string,</span><br><span class="line">  expectsLowerCase?: boolean</span><br><span class="line">): <span class="function">(<span class="params">key: string</span>) =&gt;</span> <span class="literal">true</span> | <span class="keyword">void</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> map = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>)</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">list</span>: <span class="title class_">Array</span>&lt;string&gt; = str.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; list.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    map[list[i]] = <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> expectsLowerCase</span><br><span class="line">    ? <span class="function"><span class="params">val</span> =&gt;</span> map[val.<span class="title function_">toLowerCase</span>()]</span><br><span class="line">    : <span class="function"><span class="params">val</span> =&gt;</span> map[val]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 判断是否是文本输入类型</span></span><br><span class="line"><span class="keyword">var</span> isTextInputType = <span class="title function_">makeMap</span>(<span class="string">&#x27;text,number,password,search,email,tel,url&#x27;</span>);</span><br><span class="line"><span class="title function_">isTextInputType</span>(typeA)</span><br></pre></td></tr></table></figure>

<h3 id="2-5-高阶函数"><a href="#2-5-高阶函数" class="headerlink" title="2.5 高阶函数"></a>2.5 高阶函数</h3><p>高阶函数，简单的说一般都是一个函数，参数是函数，返回值也是函数。一般都用到了闭包作为公共变量或缓存。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Create a cached version of a pure function.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> cached&lt;<span class="attr">F</span>: <span class="title class_">Function</span>&gt; (<span class="attr">fn</span>: F): F &#123;</span><br><span class="line">  <span class="keyword">const</span> cache = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>)</span><br><span class="line">  <span class="keyword">return</span> (<span class="keyword">function</span> <span class="title function_">cachedFn</span> (<span class="attr">str</span>: string) &#123;</span><br><span class="line">    <span class="keyword">const</span> hit = cache[str]</span><br><span class="line">    <span class="keyword">return</span> hit || (cache[str] = <span class="title function_">fn</span>(str))</span><br><span class="line">  &#125;: any)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行 cached 后返回的 idToTemplate 每次执行参数都会被 cached 的参数执行，并且缓存在 hit </span></span><br><span class="line"><span class="keyword">const</span> idToTemplate = <span class="title function_">cached</span>(<span class="function"><span class="params">id</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> el = <span class="title function_">query</span>(id)</span><br><span class="line">  <span class="keyword">return</span> el &amp;&amp; el.<span class="property">innerHTML</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="3-使用闭包的注意点"><a href="#3-使用闭包的注意点" class="headerlink" title="3. 使用闭包的注意点"></a>3. 使用闭包的注意点</h2><ol>
<li>由于闭包会使得函数中的变量都被保存在内存中，内存消耗很大，所以不能滥用闭包，否则会造成网页的性能问题，在IE中可能导致内存泄露。解决方法是，在退出函数之前，将不使用的局部变量全部删除。</li>
<li>闭包会在父函数外部，改变父函数内部变量的值。所以，如果你把父函数当作对象（object）使用，把闭包当作它的公用方法（Public Method），把内部变量当作它的私有属性（private value），这时一定要小心，不要随便改变父函数内部变量的值。</li>
<li>避免闭包中存在增长闭包的情况，闭包内缓存的值不断循环增加，导致内存泄露。</li>
</ol>
<p>参考资料：<br><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html">http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html</a></p>
</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-07-09</span><i class="fa fa-tag"></i><a class="tag" href="/tags/JavaScript/" title="JavaScript">JavaScript </a><span class="leancloud_visitors"></span><span>大约983个字, 3分钟16秒读完</span></div></div></div></div><div class="post animated fadeInDown"><div class="post-title"><h3><a href="/04-%E5%8E%9F%E5%9E%8B%E4%B8%8E%E7%BB%A7%E6%89%BF/">原型与继承</a></h3></div><div class="post-content"><div class="card"><p><h1 id="1-原型"><a href="#1-原型" class="headerlink" title="1. 原型"></a>1. 原型</h1><ul>
<li><strong>原型 是 函数的</strong> <code>**prototype**</code><strong>属性。</strong></li>
<li>每个函数都有一个特殊属性<code>prototype</code>的对象，即原型对象。此函数的实例，共享函数的属性及方法（即原型模式）。</li>
<li>函数的 原型对象（<code>prototype</code>） 中，有一个内部属性 <code>constructor</code>，这个属性指向该函数。</li>
</ul>
<p><img src="/04-%E5%8E%9F%E5%9E%8B%E4%B8%8E%E7%BB%A7%E6%89%BF/1642082982951-cfb4b90d-56d6-42c9-824b-5efd57b515a3.png" alt="img"></p>
<p>一个名为 Fun 的空函数的 prototype 如下：</p>
<p><img src="/04-%E5%8E%9F%E5%9E%8B%E4%B8%8E%E7%BB%A7%E6%89%BF/1661236866684-f4a45173-10f9-44be-a9e7-5e26dcac2915.png" alt="img"></p>
<h1 id="2-原型链"><a href="#2-原型链" class="headerlink" title="2.原型链"></a>2.原型链</h1><h2 id="2-1-proto"><a href="#2-1-proto" class="headerlink" title="2.1 __proto__"></a>2.1 <code>__proto__</code></h2><ul>
<li>从函数的prototype属性派生的。</li>
<li>同 <code>[[prototype]]</code></li>
<li><code>__proto__</code>相当于一个指针，在对象实例和它的构造器之间建立一个链接，用来指向创建它的构造函数的原型对象的（实例的<code>__proto__</code>指向构造器的 <code>prototype</code>）。</li>
</ul>
<h3 id="2-1-1-实例的-proto"><a href="#2-1-1-实例的-proto" class="headerlink" title="2.1.1 实例的 __proto__"></a>2.1.1 实例的 <code>__proto__</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Fun</span>(<span class="params"></span>) &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f1 = <span class="keyword">new</span> <span class="title class_">Fun</span>()</span><br></pre></td></tr></table></figure>

<p><img src="/04-%E5%8E%9F%E5%9E%8B%E4%B8%8E%E7%BB%A7%E6%89%BF/1661236711839-5db77a2f-9bc4-4d26-a221-fcbcccc6aa26.png" alt="img"></p>
<ul>
<li><code>**Fun.__proto__**</code> <strong>指向内置匿名函数 anonymous，因为 Fun 是个函数对象，默认由 Function 作为类创建</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实例的__proto__指向构造器的 prototype</span></span><br><span class="line">f1.<span class="property">__proto__</span> === <span class="title class_">Fun</span>.<span class="property"><span class="keyword">prototype</span></span> <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Fun</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> === <span class="title class_">Fun</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>Fun.prototype.__proto__</code> 指向<code>Object.prototype</code>，因为 <code>Fun.prototype</code> 是个对象，默认基于 <code>Object</code>函数作为构造函数创建的，故指向 Object.prototype</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Fun</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><img src="/04-%E5%8E%9F%E5%9E%8B%E4%B8%8E%E7%BB%A7%E6%89%BF/1661242104488-995b8332-02b8-4d60-9f14-380e0a075dbd.png" alt="img"></p>
<ul>
<li>构造函数是一个函数对象，而函数对象都是 Function 构造产生，所以 构造函数的 <code>__proto__</code>指向 Function 的原型</li>
<li>Object 对象直接继承自 Function 对象</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Fun</span>.<span class="property">__proto__</span> === <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span> <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="property">__proto__</span> === <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>一切对象都是继承自 Object对象，Object 对象直接继承根源对象 <code>null</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="literal">null</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><img src="/04-%E5%8E%9F%E5%9E%8B%E4%B8%8E%E7%BB%A7%E6%89%BF/1661242430507-fa52d9d6-de00-4324-bd66-42ec6ab079a6.png" alt="img"></p>
<h3 id="2-1-2-类的-proto"><a href="#2-1-2-类的-proto" class="headerlink" title="2.1.2 类的 __proto__"></a>2.1.2 类的 <code>__proto__</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_ inherited__">A</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">B.<span class="property">__proto__</span> === A <span class="comment">// true</span></span><br><span class="line">B.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === A.<span class="property"><span class="keyword">prototype</span></span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>子类的 <code>__proto__</code>属性，表示构造函数的继承，总是指向父类</li>
<li>子类 prototype 属性的<code>__proto__</code>属性，表示方法的继承，总是指向父类的原型</li>
<li>子类实例的__proto__属性的__proto__属性，指向父类实例的__proto__属性</li>
</ul>
<p>( <a target="_blank" rel="noopener" href="https://es6.ruanyifeng.com/?search=extends&x=0&y=0#docs/class-extends#%E7%B1%BB%E7%9A%84-prototype-%E5%B1%9E%E6%80%A7%E5%92%8C__proto__%E5%B1%9E%E6%80%A7">https://es6.ruanyifeng.com/?search=extends&x=0&y=0#docs/class-extends#%E7%B1%BB%E7%9A%84-prototype-%E5%B1%9E%E6%80%A7%E5%92%8C__proto__%E5%B1%9E%E6%80%A7</a> )</p>
<h2 id="2-2-构造函数、原型、实例的关系"><a href="#2-2-构造函数、原型、实例的关系" class="headerlink" title="2.2 构造函数、原型、实例的关系"></a>2.2 构造函数、原型、实例的关系</h2><ul>
<li>每个构造函数都有一个原型对象（<code>prototype</code>）</li>
<li>原型对象的属性<code>constructor</code>指向构造函数本身</li>
<li>构造函数的实例包含一个指向原型对象的内部指针（<code>__proto__</code>）</li>
</ul>
<h1 id="3-继承"><a href="#3-继承" class="headerlink" title="3. 继承"></a>3. 继承</h1><p>js面向过程语言，本身不存在继承。继承（inheritance）是面向对象的一个概念。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">v1</span> = <span class="number">1</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">v2</span> = <span class="number">2</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">obj</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;parent&#x27;</span>&#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">getV2</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;getB&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">v3</span> = <span class="string">&#x27;v333&#x27;</span></span><br><span class="line"><span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getV1</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;getA&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-1-原型链"><a href="#3-1-原型链" class="headerlink" title="3.1 原型链"></a>3.1 原型链</h2><p><strong>核心</strong>： </p>
<p>使用原型，让一个引用类型继承另一个引用类型的属性和方法。</p>
<p><strong>将子类原型对象指向父类的实例，子类的实例则可以继承父类的属性（即子类的实例的</strong><code>**__proto__**</code><strong>指向父类）。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Child1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">aa</span> = <span class="number">11</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Child1</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Parent</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a1 = <span class="keyword">new</span> <span class="title class_">Child1</span>()</span><br><span class="line"><span class="keyword">var</span> a2 = <span class="keyword">new</span> <span class="title class_">Child1</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a1) <span class="comment">// Child1 &#123;aa: 11&#125;</span></span><br><span class="line"><span class="comment">// 可继承 父类和原型对象上 的方法</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a1.<span class="title function_">getV1</span>(), a1.<span class="title function_">getV2</span>()) <span class="comment">// getA getB</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改普通类型的值，其他子类的实例不会被影响</span></span><br><span class="line">a2.<span class="property">v3</span> = <span class="number">123</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a1.<span class="property">v3</span>,a2.<span class="property">v3</span>) <span class="comment">// v333 123</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改引用类型的值时，所有子类实例都会被修改</span></span><br><span class="line">a1.<span class="property">obj</span>.<span class="property">name</span> = <span class="string">&#x27;name&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a1.<span class="property">obj</span>,a2.<span class="property">obj</span>) <span class="comment">// &#123;name: &#x27;name&#x27;&#125; &#123;name: &#x27;name&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>优点</strong>：</li>
</ul>
<ol>
<li>子类可以继承父类普通类型的属性，及定义在原型上的方法。</li>
</ol>
<ul>
<li><strong>缺点</strong>：</li>
</ul>
<ol>
<li>无法实现多继承。（一个实例无法指向两个原型）</li>
<li>所有的属性都是共享的（先在实例找，再在原型对象上找），修改引用类型的值时，所有子类实例都会被修改</li>
<li>无法传递参数。</li>
</ol>
<h2 id="3-2-借用构造函数"><a href="#3-2-借用构造函数" class="headerlink" title="3.2 借用构造函数"></a>3.2 借用构造函数</h2><p><strong>核心</strong>： 在子类的构造函数中，apply() 调用父类构造函数（把父类的函数重新运行一遍）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Child2</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="title class_">Parent</span>.<span class="title function_">apply</span>(<span class="variable language_">this</span>, <span class="variable language_">arguments</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> b1 = <span class="keyword">new</span> <span class="title class_">Child2</span>()</span><br><span class="line"><span class="keyword">var</span> b2 = <span class="keyword">new</span> <span class="title class_">Child2</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改引用类型的值时，子类实例不会相互影响</span></span><br><span class="line">b1.<span class="property">obj</span>.<span class="property">name</span> = <span class="string">&#x27;haha&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b1.<span class="property">obj</span>,b2.<span class="property">obj</span>) <span class="comment">// &#123;name: &#x27;haha&#x27;&#125; &#123;name: &#x27;parent&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不能继承 父类原型对象上 的属性和方法</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b1.<span class="property">v3</span>) <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b1.<span class="title function_">getV2</span>(), b1.<span class="title function_">getV1</span>())  <span class="comment">// getB TypeError: b1.getV1 is not a function</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>优点</strong>：</li>
</ul>
<ol>
<li>可以多继承，可调用几次 apply</li>
<li>解决内部属性会共享的问题（每创建一个子类的实例，都会把父类再重新运行一遍，因此每个子类的实例指向不同的地址）</li>
<li>可以传参，子类的参数会在父类中运行一遍</li>
</ol>
<ul>
<li><strong>缺点</strong>：</li>
</ul>
<ol>
<li>new 创建的实例只是子类的实例，不是父类的实例，只是相当于把父类拷下来再运行一遍。</li>
<li>只能继承父类构造函数中的属性和方法，不能继承父类原型中的属性和方法；（一般会在构造函数中写一些属性，在原型中写一些方法）</li>
</ol>
<h2 id="3-3-组合继承（伪经典）"><a href="#3-3-组合继承（伪经典）" class="headerlink" title="3.3 组合继承（伪经典）"></a>3.3 组合继承（伪经典）</h2><p><strong>原理</strong>：在借用构造函数方式的基础上，使用原型链实现原型属性和方法的继承。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Child3</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="title class_">Parent</span>.<span class="title function_">apply</span>(<span class="variable language_">this</span>, <span class="variable language_">arguments</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Child3</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Parent</span>()</span><br><span class="line"><span class="title class_">Child3</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Child3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c1 = <span class="keyword">new</span> <span class="title class_">Child3</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c1.<span class="property">v3</span>, c1.<span class="title function_">getV1</span>()) <span class="comment">// getA v333</span></span><br></pre></td></tr></table></figure>

<p><strong>优点</strong>：</p>
<ol>
<li>多继承</li>
<li>可以传参</li>
<li>原型的指向也都是正确的</li>
</ol>
<p><strong>缺点</strong>：</p>
<ol>
<li><strong>构造函数被运行了两次。</strong> 父类的构造函数被调用两次，第一次在创建子类原型 Child.prototype &#x3D; new Parent() 时，第二次在call&#x2F;apply 时，若父类构造函数大或者耗性能，整体性能会受影响。</li>
<li><strong>构造函数中的属性和方法，同时存在于实例和原型中。</strong> 当用 new Parent() 创建实例时，构造函数的属性或方法在子类实例上有一份，在子类的原型上也会有一份，但由于同名覆盖，不会出错。但属性和实例会实例和实例的原型中个存在一份，占用多余内存。</li>
</ol>
<h2 id="3-4-原型式继承"><a href="#3-4-原型式继承" class="headerlink" title="3.4 原型式继承"></a>3.4 原型式继承</h2><p><strong>原理</strong>： 通过 <code>Object.create()</code> 实现字符字面量对象的继承。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">Parent2</span> = &#123;</span><br><span class="line"> <span class="attr">v1</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="attr">v2</span>: <span class="number">2</span>,</span><br><span class="line"> <span class="attr">obj</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;parent&#x27;</span>&#125;,</span><br><span class="line"> <span class="attr">getV2</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;getB&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> d1 = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Parent2</span>)</span><br><span class="line"><span class="keyword">var</span> d2 = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Parent2</span>)</span><br><span class="line"></span><br><span class="line">d1.<span class="property">v1</span> = <span class="number">123</span></span><br><span class="line">d1.<span class="property">obj</span>.<span class="property">name</span> = <span class="string">&#x27;hhh&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(d2.<span class="property">v1</span>, d2.<span class="property">obj</span>.<span class="property">name</span>) <span class="comment">// 1 &#x27;hhh&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>原型链继承</strong>，是继承一个构造函数。</li>
<li><strong>原型继承</strong>，是继承一个普通对象。</li>
</ul>
<p><strong>缺点</strong>： Object.create方法是浅拷贝，多个实例的引用类型属性指向相同的内存，会相互影响</p>
<h2 id="3-5-寄生式继承"><a href="#3-5-寄生式继承" class="headerlink" title="3.5 寄生式继承"></a>3.5 寄生式继承</h2><p><strong>原理</strong>： 创建一个仅用于封装继承过程的函数，该函数在内部以某种方式来增强对象，最后再想真得是它做了所有工作一样的返回对象。 （将原型继承封装起来，同时增加属性和方法。）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createPlus</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">var</span> clone = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Parent2</span>);</span><br><span class="line">	clone.<span class="property">getOrg</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="title function_">alert</span>(<span class="string">&#x27;hi plus&#x27;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> clone;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a1 = <span class="title function_">createPlus</span>(a);</span><br></pre></td></tr></table></figure>

<p><strong>缺点</strong>： 同原型继承</p>
<h2 id="3-6-寄生组合式继承-完美继承"><a href="#3-6-寄生组合式继承-完美继承" class="headerlink" title="3.6 寄生组合式继承(完美继承)"></a>3.6 寄生组合式继承(完美继承)</h2><p><strong>原理</strong>： 寄生组合式继承，就是借用构造函数来继承属性，通过原型链的混成形式来继承方法。</p>
<p>在组合继承的基础上，将 new Parent() 方式修改为 Object.create()，以解决构造函数执行两遍的问题。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Child6</span> () &#123;</span><br><span class="line">  <span class="title class_">Parent</span>.<span class="title function_">apply</span>(<span class="variable language_">this</span>,<span class="variable language_">arguments</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">clone</span> (parent, child) &#123;</span><br><span class="line">	child.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(parent.<span class="property"><span class="keyword">prototype</span></span>)</span><br><span class="line">  child.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = child</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">clone</span>(<span class="title class_">Parent</span>, <span class="title class_">Child6</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f1 = <span class="keyword">new</span> <span class="title class_">Child6</span>()</span><br><span class="line"><span class="keyword">var</span> f2 = <span class="keyword">new</span> <span class="title class_">Child6</span>()</span><br><span class="line"></span><br><span class="line">f1.<span class="property">v1</span> = <span class="number">123</span></span><br><span class="line">f1.<span class="property">obj</span>.<span class="property">name</span> = <span class="string">&#x27;hhh&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(f2.<span class="property">v1</span>, f2.<span class="property">obj</span>.<span class="property">name</span>) <span class="comment">// 1 &#x27;parent&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(f1.<span class="title function_">getV2</span>(), f1.<span class="title function_">getV1</span>())  <span class="comment">// getB getA</span></span><br></pre></td></tr></table></figure>

<p>ES6 中的 extends 关键字直接实现 JavaScript的寄生组合继承。</p>
</p></div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-05-10</span><i class="fa fa-tag"></i><a class="tag" href="/tags/JavaScript/" title="JavaScript">JavaScript </a><span class="leancloud_visitors"></span><span>大约1956个字, 6分钟31秒读完</span></div></div></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/page/2/">上一页</a></li></ul></div></div></div></div><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/add-bookmark.js"></script><script>(function(window){var INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(无标题)",},CONTENT_URL:"/content.json",};window.INSIGHT_CONFIG=INSIGHT_CONFIG})(window);</script><script src="/js/insight.js" defer></script><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input class="searchbox-input ins-search-input" type="text" placeholder="想要查找什么..."><span class="searchbox-close"><a class="fa fa-times-circle" onclick="closeWindow();"></a></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"><p>Seraching...</p></div></div></div></div></body></html>